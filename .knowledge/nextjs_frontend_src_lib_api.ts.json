{"is_source_file": true, "format": "TypeScript", "description": "This file provides an API client wrapper for interacting with a FastAPI backend from a Next.js frontend application. It includes functions for authentication, session management, messaging, uploading, and various administrative endpoints, handling authorization tokens stored in local storage.", "external_files": ["fetch"], "external_methods": ["localStorage.getItem", "fetch", "JSON.stringify", "Headers", "res.text", "res.json", "res.headers.get"], "published": ["api", "login", "register", "getProfile", "listStudentSessions", "createSession", "getSessionMessages", "sendMessage", "uploadMaterial", "getStreak", "getStudentAnalytics", "getMentorDashboard", "getAdminDashboard", "listUsers", "createUser", "deleteUser", "listDepartments", "createDepartment", "deleteDepartment"], "classes": [], "methods": [{"name": "function getToken(): string | null { getToken", "description": "Retrieves the authentication token from localStorage, handling potential errors.", "scope": "", "scopeKind": ""}, {"name": "async function request<T>(path: string, options: FetchOptions = {}): Promise<T> { request", "description": "Performs fetch requests with appropriate headers, handling JSON serialization, authorization, and error handling.", "scope": "", "scopeKind": ""}, {"name": "export async function createDepartment(payload: { name: string }) { createDepartment", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function createSession() { createSession", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function createUser(payload: { name: string; email: string; role: string }) { createUser", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function deleteDepartment(id: string) { deleteDepartment", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function deleteUser(id: string) { deleteUser", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getAdminDashboard() { getAdminDashboard", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getMentorDashboard() { getMentorDashboard", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getProfile() { getProfile", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getSessionMessages(sessionId: string) { getSessionMessages", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getStreak() { getStreak", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getStudentAnalytics() { getStudentAnalytics", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function listDepartments() { listDepartments", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function listStudentSessions() { listStudentSessions", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function listUsers() { listUsers", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function login(payload: { email: string; password: string }) { login", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function register(payload: { name: string; email: string; password: string; role?: / register", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function sendMessage(sessionId: string, payload: { content: string; files?: string[/ sendMessage", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function uploadMaterial(files: Array<{ name: string; size: number }>) { uploadMaterial", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "getToken", "JSON.stringify", "new Headers", "res.text", "res.json"], "search-terms": ["api client", "FastAPI wrapper", "Next.js API", "auth token", "session management", "chat endpoints", "admin endpoints", "public interface"], "state": 2, "file_id": 35, "knowledge_revision": 140, "git_revision": "", "revision_history": [{"83": ""}, {"134": ""}, {"140": ""}], "ctags": [{"_type": "tag", "name": "BASE_URL", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^const BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || \"\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "FetchOptions", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^type FetchOptions = RequestInit & { json?: JsonValue };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "JsonValue", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^type JsonValue = string | number | boolean | null | JsonValue[] | { [key: string]: JsonValue };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export const api = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const contentType = res.headers.get(\"content-type\") || \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "createDepartment", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function createDepartment(payload: { name: string }) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createSession", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function createSession() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createUser", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function createUser(payload: { name: string; email: string; role: string }) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteDepartment", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function deleteDepartment(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteUser", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function deleteUser(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAdminDashboard", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getAdminDashboard() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getMentorDashboard", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getMentorDashboard() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getProfile", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getProfile() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getSessionMessages", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getSessionMessages(sessionId: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStreak", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getStreak() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStudentAnalytics", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function getStudentAnalytics() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getToken", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^function getToken(): string | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const headers = new Headers(options.headers || {});$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "isJson", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const isJson = options.json !== undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "listDepartments", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function listDepartments() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listStudentSessions", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function listStudentSessions() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listUsers", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function listUsers() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function login(payload: { email: string; password: string }) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  post: <T>(path: string, json?: JsonValue) => request<T>(path, { method: \"POST\", json }),$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function register(payload: { name: string; email: string; password: string; role?: /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^async function request<T>(path: string, options: FetchOptions = {}): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "sendMessage", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function sendMessage(sessionId: string, payload: { content: string; files?: string[/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const token = getToken();$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}, {"_type": "tag", "name": "uploadMaterial", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^export async function uploadMaterial(files: Array<{ name: string; size: number }>) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/socratic-learning-assistant-147382-147391/nextjs_frontend/src/lib/api.ts", "pattern": "/^  const url = path.startsWith(\"http\") ? path : `${BASE_URL}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "request", "scopeKind": "function"}], "hash": "96f05bfac83204df499f704326c8769c", "format-version": 4, "code-base-name": "nextjs_frontend", "filename": "nextjs_frontend/src/lib/api.ts"}